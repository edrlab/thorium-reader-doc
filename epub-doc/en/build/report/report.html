<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap4.min.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <style>
    /* general */
    body {
      margin: 3em;
    }
    .tab-content {
      margin-top: 2em;
    }

    table th {
      width: auto !important;
    }
    code {
      line-height: 1.5;
    }

    .location {
      font-size:.8em;font-family:monospace;overflow-wrap:break-word
    }

    .snippet {
      font-size:.8em;
    }
    .snippet code {
      display: block;
      font-size:1em;
      font-family:monospace;overflow-wrap:break-word;
      margin-top: 1em;
    }

    .tab-pane{
      margin-top: 1.5em;
      margin-left: 1em;
      margin-bottom: 2em; /* useful for javascriptless (tab-less) linear display mode */
    }

    .pagenav {
      font-style: italic;
      font-size: small;
      margin-top: 1em;
    }

    .sectionnav {
      font-style: italic;
      font-size: small;
      margin-top: 1em;
      margin-bottom: 2em;
    }
    /* metadata */
    #metadata-table tr td:first-child {
      font-family: 'Courier New';
      font-weight: bold;
    }
    .metadata-name {
      font-family: 'Courier New';
      font-weight: bold;
    }
    .metadata-name:after {
      content: ", ";
    }
    .metadata-name:last-child::after {
      content: "";
    }
    #a11y-metadata {
      margin-top: 1em;
    }
    #metadata-table_wrapper {
      padding-left: 0 !important;
    }

    /* TOC outline */
    .toc-h1:before,.toc-h2:before,.toc-h3:before,.toc-h4:before,.toc-h5:before,.toc-h6:before,.toc-missing{
      display:inline-block;
      height:1.5em;
      padding:0 .4em;
      background-color:#449d44;
      border-radius:4px;
      color:#fff;
      font-size:.8em;
      font-family:monospace;
      margin:0 .5em 0 0;
    }

    .toc-h1:before{content:'h1'}
    .toc-h2:before{content:'h2'}
    .toc-h3:before{content:'h3'}
    .toc-h4:before{content:'h4'}
    .toc-h5:before{content:'h5'}
    .toc-h6:before{content:'h6'}
    .toc-missing{font-family:inherit;background-color:#c9302c}

    #toc-outline ol, #html-outline ol {
      list-style: disc;
    }

    /* images */
    #images td {
      text-align: center;
      font-family: serif;
    }
    #images td.image{
      /*text-align:center;*/
      padding:.2em;
    }
    #images td.missing{
      /*text-align:center;*/
      color:#888;
      font-style:italic;
    }
    #images td.alt {border:1px solid #ddd}
    #images td.alt.missing{background-color:#f2dede}
    #images td.alt,td.image.presentation+td.alt.missing{background-color:#dff0d8}
    #images img {
      max-height: 300px;
      max-width: 300px;
    }

    /* violations  */
    #violations-summary-stats-table {
      width: 30%;
    }
    #violations ul:not(.pagination) {
      list-style-type: circle;
    }

    #filters select {
      margin-left: 10px;
      margin-right: 30px;
    }

    .filter-label {
      text-transform: capitalize;
    }

    .engine {
      font-style: italic;
    }
    .engine:before{content: '(via '}
    .engine:after{content: ')'}
    .css:before{content: 'CSS: '}
    .cfi:before{content: 'CFI: '}

    /* make the list and KB link the same padding */
    td.details p{
      padding-left: 40px;
    }

    span.critical, span.serious, span.moderate, span.minor {
      display:inline-block;
      height:1.5em;
      padding: .4em;
      border-radius:4px;
      font-family:monospace;
      font-weight: bold;
    }

    span.critical {
      background-color: #9c2b2e;
      color: #fff;
    }
    span.serious {
      background-color: #ffa500;
      color: #000;
    }
    span.moderate {
      background-color: #7b5000;
      color: #fff;
    }
    span.minor {
      background-color: #ffff7f;
      color: #000;
    }
    #message {
      margin-left: 1em;
    }
    #violations-table_wrapper {
      padding-left: 0 !important;
    }

  </style>

  <title>EPUB Accessibility Report by DAISY Ace</title>
</head>
<body>

  <header>
    <noscript>
      <div class="alert alert-info">Please enable javascript for best performance.</div>
    </noscript>

    <h1>EPUB Accessibility Report</h1>
    <p class="font-italic">Generated by DAISY Ace (1.1.1) on 27/03/2025, 14:34:12</p>
    <p><span class="font-weight-bold">Title:</span> Thorium reader user&#x27;s guide (English, 3.1)</p>
  </header>

  <nav>
    <ul id="navlist" role="tablist">
      <li class="nav-item"><a class="nav-link active" data-toggle="list" href="#violations" role="tab" aria-controls="violations" id="nav-violations">Violations</a></li>
      <li class="nav-item"><a class="nav-link" data-toggle="list" href="#metadata" role="tab" aria-controls="metadata" id="nav-metadata">Metadata</a></li>
      <li class="nav-item"><a class="nav-link" data-toggle="list" href="#outlines" role="tab" aria-controls="outlines" id="nav-outlines">Outlines</a></li>
      <li class="nav-item"><a class="nav-link" data-toggle="list" href="#images" role="tab" aria-controls="images" id="nav-images">Images</a></li>
    </ul>
  </nav>


  <!-- Tab panes -->
  <div class="tab-content">

    <!-- VIOLATIONS TAB -->
    <div id="violations" role="tabpanel">
      <h2>Violations</h2>
      <p class="sectionnav">Go to: <a href="#summary_of_violations">Summary of violations</a> | <a href="#all-violations">All violations</a> </p>

      <h3 id="summary_of_violations">Summary of violations</h3>
      <table id="violations-summary-stats-table" class="table table-striped">
        <caption>Violation count, by ruleset and severity.</caption>
        <thead class="thead-inverse">
          <tr>
            <th></th>
            <th scope="col">Critical</th>
            <th scope="col">Serious</th>
            <th scope="col">Moderate</th>
            <th scope="col">Minor</th>
            <th scope="col">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">WCAG 2.0 A</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">WCAG 2.0 AA</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">EPUB</th>
            <td>0</td><td>1</td><td>0</td><td>0</td><td>1</td>
          </tr>
          <tr>
            <th scope="row">Best Practice</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">Other</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">Total</th>
            <td>0</td><td>1</td><td>0</td><td>0</td><td>1</td>
          </tr>
        </tbody>
      </table>

      <h3 id="all-violations">All violations</h3>

      <div id="filters" class="d-none py-4">
        <span class="filter-label">Impact</span>
        <select name="impact" aria-label="impact">
          <option value="all" selected>All</option>
          <option value='serious'>Serious</option>
        </select>
        <span class="filter-label">Ruleset</span>
        <select name="ruleset" aria-label="ruleset">
          <option value="all" selected>All</option>
          <option value='EPUB'>EPUB</option>
        </select>
        <span class="filter-label">Rule</span>
        <select name="rule" aria-label="rule">
          <option value="all" selected>All</option>
          <option value='metadata-accessibilitysummary'>metadata-accessibilitysummary</option>
        </select>
        <span class="filter-label">File</span>
        <select name="file" aria-label="file">
          <option value="all" selected>All</option>
          <option value='EPUB/package.opf'>EPUB/package.opf</option>
        </select>
        <a href="#" onclick="resetFilters()" class="ml-4">Reset filters</a>
      </div>

      <table id="violations-table" class="table table-bordered">
        <caption>Violations in the EPUB, with references to severity, guidelines and specific location of problem.</caption>
        <thead class="thead-inverse">
          <tr>
            <th>Impact</th>
            <th>Ruleset</th>
            <th>Rule</th>
            <th>Location</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody>
          <tr>
        <td><span class='serious'>Serious</span></td>
        <td><span class='ruleset'>EPUB</span></td>
        <td>metadata-accessibilitysummary<br/><br/><span class='engine'>Ace</span></td>
        <td><em>"Thorium reader user's guide (English, 3.1)"</em><br/><br/><code class='location'>EPUB/package.opf</code></td><td class='details'>
        <ul><li>Publications must declare the &#39;schema:accessibilitySummary&#39; metadata</li></ul>
        <p><a href='http://kb.daisy.org/publishing/docs/metadata/schema-org.html' target='_blank'>Learn more about: Schema.org Accessibility Metadata</a></p>
        </td></tr>
        </tbody>
      </table>

      <p class="pagenav">Go to: <a href="#violations">Top of section</a> | <a href="#navlist">Page navigation</a></p>
    </div>

    <!-- METADATA TAB -->
    <div id="metadata" role="tabpanel">
      <h2>Metadata</h2>

      <p class="sectionnav">Go to: <a href="#all-metadata">All Metadata</a> | <a href="#a11y-metadata">Accessibility Metadata</a> </p>

      <h3 id="all-metadata">All Metadata</h3>
      <table id="metadata-table" class="table table-bordered">
        <caption>Publication metadata.</caption>
        <thead class="thead-inverse">
          <tr>
            <th>Name</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>dc:title</td>
            <td>Thorium reader user&#x27;s guide (English, 3.1)</td>
          </tr>
          <tr>
            <td>dc:creator</td>
            <td>The European Digital Reading Lab</td>
          </tr>
          <tr>
            <td>dc:publisher</td>
            <td>The European Digital Reading Lab</td>
          </tr>
          <tr>
            <td>dc:description</td>
            <td>This is the official Thorium 3.1 documentation. It offers guidance to help you get to know and make better use of Thorium Reader. Quick support references are not included here and are available online from the Thorium Support webpages.</td>
          </tr>
          <tr>
            <td>dc:identifier</td>
            <td>com.github.edrlab.thorium-reader-doc-epub-en.3.1.0</td>
          </tr>
          <tr>
            <td>dc:language</td>
            <td>en</td>
          </tr>
          <tr>
            <td>dc:rights</td>
            <td>Creative Commons Attribution-Share Alike (CC BY-SA) license.</td>
          </tr>
          <tr>
            <td>dcterms:modified</td>
            <td>2025-01-30T00:00:00Z</td>
          </tr>
          <tr>
            <td>schema:accessibilityFeature</td>
            <td>alternativeText,readingOrder,structuralNavigation,tableOfContents</td>
          </tr>
          <tr>
            <td>schema:accessMode</td>
            <td>textual,visual</td>
          </tr>
          <tr>
            <td>schema:accessModeSufficient</td>
            <td>textual</td>
          </tr>
          <tr>
            <td>schema:accessibilityControl</td>
            <td>fullKeyboardControl,fullMouseControl</td>
          </tr>
          
        </tbody>
      </table>

      <h3 id="a11y-metadata">Accessibility Metadata</h3>

        <p>The following accessibility metadata is present:
          <span class="metadata-name">schema:accessMode</span>
          <span class="metadata-name">schema:accessibilityFeature</span>
          <span class="metadata-name">schema:accessModeSufficient</span>
          <span class="metadata-name">schema:accessibilityControl</span>
        </p>

        <p>The following accessibility metadata is missing:
          <span class="metadata-name">schema:accessibilityHazard</span>
          <span class="metadata-name">schema:accessibilitySummary</span>
          <span class="metadata-name">schema:accessibilityAPI</span>
          <span class="metadata-name">a11y:certifiedBy</span>
          <span class="metadata-name">dcterms:conformsTo</span>
        .
        </p>
      <p class="pagenav">Go to: <a href="#metadata">Top of section</a> | <a href="#navlist">Page navigation</a></p>
    </div>

    <!-- OUTLINES TAB -->
    <div id="outlines" role="tabpanel">
      <h2>Outlines</h2>
      <p class="sectionnav">Go to: <a href="#toc-outline">TOC Outline</a> | <a href="#headings-outline">Headings Outline</a> | <a href="#html-outline">HTML Outline</a> </p>

      <div class="row">

        <div class="col-sm" id="toc-outline">
          <h3>TOC Outline</h3>
          <ol xmlns="http://www.w3.org/1999/xhtml">
            <li>
              Forewords
            </li>
            <li>
              Opening Thorium Reader
            </li>
            <li>
              Windows, views and panels
              <ol>
                <li>
                  Main window
                  <ol>
                    <li>
                      Home View
                    </li>
                    <li>
                      All publications View
                      <ol>
                        <li>
                          Grid Mode
                        </li>
                        <li>
                          Table Mode
                        </li>
                      </ol>
                    </li>
                    <li>
                      Catalogs View
                    </li>
                    <li>
                      Application Settings Panel
                    </li>
                  </ol>
                </li>
                <li>
                  Reading window
                  <ol>
                    <li>
                      Reading navigation panel
                    </li>
                    <li>
                      Reading settings panel
                    </li>
                    <li>
                      Book Information panel
                    </li>
                  </ol>
                </li>
              </ol>
            </li>
            <li>
              Libraries actions
            </li>
            <li>
              Catalogs actions
            </li>
            <li>
              Reading
              <ol>
                <li>
                  Reading textual contents
                </li>
                <li>
                  Reading visual contents
                </li>
                <li>
                  Reading audio contents
                </li>
                <li>
                  Reading PDFs
                </li>
              </ol>
            </li>
            <li>
              Search in a book
            </li>
            <li>
              Bookmarking
            </li>
            <li>
              Annotating
              <ol>
                <li>
                  Annotations Panel
                </li>
                <li>
                  Options for annotations
                </li>
                <li>
                  Sort and filter annotations
                </li>
                <li>
                  Review and manipulation of annotations
                </li>
                <li>
                  Export and Import of Annotations
                </li>
              </ol>
            </li>
            <li>
              Accessibility
              <ol>
                <li>
                  Accessibility information
                </li>
                <li>
                  Native accessibility functions
                </li>
                <li>
                  Reading with a screen reader
                </li>
              </ol>
            </li>
            <li>
              Ressources
              <ol>
                <li>
                   Keyboard functions
                </li>
                <li>
                  Tactile gestures
                </li>
                <li>
                  links to online support pages
                </li>
              </ol>
            </li>
            <li>
              Supported publication formats
            </li>
            <li>
              About this ebook
            </li>
          </ol>
        </div>

        <div class="col-sm" id="headings-outline">
          <h3>Headings Outline</h3>
          <ul><li><span class="toc-h1">Thorium reader user's guide (English, 3.1)</span><ul><li><span class="toc-h2">This is the documentation for Thorium 3, and it is a work in progress!</span><li><span class="toc-h2">Additional material available online</span></li></ul></li><li><span class="toc-h1">Opening Thorium Reader</span><li><span class="toc-h1">Windows, views and panels</span><ul><li><span class="toc-h2">Main window</span><ul><li><span class="toc-h3">Home View</span><li><span class="toc-h3">All publications View</span><ul><li><span class="toc-h4">Grid Mode</span><li><span class="toc-h4">Table Mode</span></li></ul></li><li><span class="toc-h3">Catalogs View</span><li><span class="toc-h3">Application Settings Panel</span></li></ul></li><li><span class="toc-h2">Reading window</span><ul><li><span class="toc-h3">Reading navigation panel</span><li><span class="toc-h3">Reading settings panel</span></li></ul></li><li><span class="toc-h2">Book Information panel</span></li></ul></li><li><span class="toc-h1">Libraries actions</span><ul><li><span class="toc-h2">Add tags</span></li></ul></li><li><span class="toc-h1">Catalogs actions</span><ul><li><span class="toc-h2">Setting up an OPDS catalog</span><ul><li><span class="toc-h3">Example of OPDS feeds with LCP protected contents</span><li><span class="toc-h3">OPDS Feed responsibility</span></li></ul></li><li><span class="toc-h2">Setting up a french public library account</span></li></ul></li><li><span class="toc-h1">Reading</span><ul><li><span class="toc-h2">Zen Mode and Full screen </span><li><span class="toc-h2">Reading textual contents</span><ul><li><span class="toc-h3">Text adjustment settings</span><li><span class="toc-h3">Theme</span><li><span class="toc-h3">Text</span><ul><li><span class="toc-h4">Example 1: Setting Verdana as the reading font</span><li><span class="toc-h4">Example 2: Setting up Luciole as the reading font</span></li></ul></li><li><span class="toc-h3">Display</span><li><span class="toc-h3">Spacing</span><li><span class="toc-h3">Readaloud</span><li><span class="toc-h3">Text to Speech (TTS)</span></li></ul></li></ul></li><li><span class="toc-h1">Reading visual contents</span><ul><li><span class="toc-h2">Zooming on images</span></li></ul></li><li><span class="toc-h1">Reading audio contents</span><li><span class="toc-h1">Reading PDFs</span><ul><li><span class="toc-h2">Reading settings for PDFs</span><li><span class="toc-h2">Navigation features for PDFs</span><li><span class="toc-h2">Bookmarks and annotations for PDFs</span><ul><li><span class="toc-h3">Navigation</span><li><span class="toc-h3">Viewer controls</span></li></ul></li><li><span class="toc-h2">Search in a book</span><li><span class="toc-h2">Add a bookmark</span><li><span class="toc-h2">Reviewing and navigating the Bookmarks</span></li></ul></li><li><span class="toc-h1">Annotations</span><ul><li><span class="toc-h2">Annotations panel</span><li><span class="toc-h2">Options for annotations</span><li><span class="toc-h2">Sort and filter annotations</span><li><span class="toc-h2">Export and Import of Annotations</span></li></ul></li><li><span class="toc-h1">Accessibility</span><ul><li><span class="toc-h2">Accessibility information</span><li><span class="toc-h2">Native accessibility functions</span><li><span class="toc-h2">Reading with a screen player</span><ul><li><span class="toc-h3">Quick keys for navigation (common to NVDA and Jaws)</span></li></ul></li></ul></li><li><span class="toc-h1">Ressources</span><ul><li><span class="toc-h2">Keyboard functions</span><li><span class="toc-h2">Tactile gestures</span><li><span class="toc-h2">links to online support pages</span><ul><li><span class="toc-h3">
        
          Ressources
        
      </span><li><span class="toc-h3">
        
          Accessibility
        
      </span><li><span class="toc-h3">
        
          Want to collaborate?
        
      </span><li><span class="toc-h3">
        
          Your help is precious
        
      </span><li><span class="toc-h3">
        
          About Thorium Reader
        
      </span></li></ul></li><li><span class="toc-h2">Supported publication formats</span></li></ul></li><li><span class="toc-h1">About this ebook</span><ul><li><span class="toc-h2">Credits</span><li><span class="toc-h2">Accessibility</span></li></ul></li><li><span class="toc-h1">Table of contents</span><li><span class="toc-h1">Landmarks</span></li></ul>
        </div>

        <div class="col-sm" id="html-outline">
          <h3>HTML Outline</h3>
          <ol><li><ol><li><i>Untitled BODY</i><ol><li>Thorium reader user's guide (English, 3.1)</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li><i>Untitled SECTION</i></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>This is the documentation for Thorium 3, and it is a work in progress!</li><li>Additional material available online</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Opening Thorium Reader</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Windows, views and panels<ol><li>Main window<ol><li>Home View</li><li>All publications View<ol><li>Grid Mode</li><li>Table Mode</li></ol></li><li>Catalogs View</li><li>Application Settings Panel</li></ol></li><li>Reading window<ol><li>Reading navigation panel</li><li>Reading settings panel</li></ol></li><li>Book Information panel</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Libraries actions<ol><li>Add tags</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Catalogs actions<ol><li>Setting up an OPDS catalog<ol><li>Example of OPDS feeds with LCP protected contents</li><li>OPDS Feed responsibility</li></ol></li><li>Setting up a french public library account</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Reading<ol><li>Zen Mode and Full screen </li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Reading textual contents<ol><li>Text adjustment settings</li><li>Theme</li><li>Text<ol><li>Example 1: Setting Verdana as the reading font</li><li>Example 2: Setting up Luciole as the reading font</li></ol></li><li>Display</li><li>Spacing</li><li>Readaloud</li><li>Text to Speech (TTS)</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Reading visual contents<ol><li>Zooming on images</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Reading audio contents</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Reading PDFs<ol><li>Reading settings for PDFs</li><li>Navigation features for PDFs</li><li>Bookmarks and annotations for PDFs<ol><li>Navigation</li><li>Viewer controls</li></ol></li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Search in a book</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Add a bookmark</li><li>Reviewing and navigating the Bookmarks</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Annotations<ol><li>Annotations panel</li><li>Options for annotations</li><li>Sort and filter annotations</li><li>Export and Import of Annotations</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Accessibility<ol><li>Accessibility information</li><li>Native accessibility functions</li><li>Reading with a screen player<ol><li>Quick keys for navigation (common to NVDA and Jaws)</li></ol></li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Ressources<ol><li>Keyboard functions</li><li>Tactile gestures</li><li>links to online support pages<ol><li>
        
          Ressources
        
      </li><li>
        
          Accessibility
        
      </li><li>
        
          Want to collaborate?
        
      </li><li>
        
          Your help is precious
        
      </li><li>
        
          About Thorium Reader
        
      </li></ol></li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Supported publication formats</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>About this ebook<ol><li>Credits</li><li>Accessibility</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li><i>Untitled SECTION</i><ol><li>Table of contents<ol><li><i>Untitled NAV</i></li></ol></li><li>Landmarks<ol><li><i>Untitled NAV</i></li></ol></li></ol></li></ol></li></ol></li></ol>
      </div>
    </div>
    <p class="pagenav">Go to: <a href="#outlines">Top of section</a> | <a href="#navlist">Page navigation</a></p>
  </div>

  <!-- IMAGES TAB -->
  <div id="images" role="tabpanel">
      <h2>Images</h2>
        <table  id="image-table" class="table table-striped table-bordered">
          <caption>Images in the EPUB, with their description</caption>
          <thead class="thead-inverse">
             <tr>
                <th>Image</th>
                <th><code>alt</code>
                </th>
                <th><code>aria-describedby</code>
                </th>
                <th><code>figcaption</code></th>
                <th>Location</th>
                <th>Role</th>
             </tr>
          </thead>
          <tbody>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/cover.jpeg">
                      <img src = "data/EPUB/resources/images/cover.jpeg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">cover/index.xhtml#epubcfi(/4/2/6/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local_en/th3_main_window_home.png">
                      <img src = "data/EPUB/resources/images/local_en/th3_main_window_home.png"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/102_windows_views_panels/index.xhtml#epubcfi(/4/2/14/2)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local_en/th3_main_settings_keys_context.png">
                      <img src = "data/EPUB/resources/images/local_en/th3_main_settings_keys_context.png"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/102_windows_views_panels/index.xhtml#epubcfi(/4/2/44/6/2/2)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/icons3/tag-icon.svg">
                      <img src = "data/EPUB/resources/images/icons3/tag-icon.svg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/102_windows_views_panels/index.xhtml#epubcfi(/4/2/70/14/2)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local_en/th3_library_grid_actions.png">
                      <img src = "data/EPUB/resources/images/local_en/th3_library_grid_actions.png"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/110_libraries_actions/index.xhtml#epubcfi(/4/2/8/2)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local_en/th3_library_table_actions.png">
                      <img src = "data/EPUB/resources/images/local_en/th3_library_table_actions.png"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/110_libraries_actions/index.xhtml#epubcfi(/4/2/8/4)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/icons3/info-icon.svg">
                      <img src = "data/EPUB/resources/images/icons3/info-icon.svg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/110_libraries_actions/index.xhtml#epubcfi(/4/2/8/6)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/icons3/doubleCheck-icon.svg">
                      <img src = "data/EPUB/resources/images/icons3/doubleCheck-icon.svg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/110_libraries_actions/index.xhtml#epubcfi(/4/2/8/8)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/icons3/bin-icon.svg">
                      <img src = "data/EPUB/resources/images/icons3/bin-icon.svg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/110_libraries_actions/index.xhtml#epubcfi(/4/2/8/10)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/icons3/SaveAs-icon.svg">
                      <img src = "data/EPUB/resources/images/icons3/SaveAs-icon.svg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/110_libraries_actions/index.xhtml#epubcfi(/4/2/8/12)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/icons3/search-icon.svg">
                      <img src = "data/EPUB/resources/images/icons3/search-icon.svg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/110_libraries_actions/index.xhtml#epubcfi(/4/2/16/2)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local_en/th3_library_pages.png">
                      <img src = "data/EPUB/resources/images/local_en/th3_library_pages.png"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/110_libraries_actions/index.xhtml#epubcfi(/4/2/28/2)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local-fr/thorium-opds-add.png">
                      <img src = "data/EPUB/resources/images/local-fr/thorium-opds-add.png"/>
                    </a>
                  </td>

                    <td>image</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/111_catalogs_actions/index.xhtml#epubcfi(/4/2/20/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/icons3/textarea-icon.svg">
                      <img src = "data/EPUB/resources/images/icons3/textarea-icon.svg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/211_reading_textuals/index.xhtml#epubcfi(/4/2/10/4)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local-fr/thorium-verdana.png">
                      <img src = "data/EPUB/resources/images/local-fr/thorium-verdana.png"/>
                    </a>
                  </td>

                    <td>Screenshot showing the Text settings Pannel with verdana set up as reading font</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/211_reading_textuals/index.xhtml#epubcfi(/4/2/26/6/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local-fr/thorium-luciole.png">
                      <img src = "data/EPUB/resources/images/local-fr/thorium-luciole.png"/>
                    </a>
                  </td>

                    <td>Screenshot showing the Text settings Pannel with Luciole set up as reading font</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/211_reading_textuals/index.xhtml#epubcfi(/4/2/26/12/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local-fr/thorium-search-navpanel.png">
                      <img src = "data/EPUB/resources/images/local-fr/thorium-search-navpanel.png"/>
                    </a>
                  </td>

                    <td>Screenshot, the search bar is present above the text, the corresponding text highlighted in green and the Search panel indicates a match</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/220_reading_actions/index.xhtml#epubcfi(/4/2/10/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/icons3/bookmarkSingle-icon.svg">
                      <img src = "data/EPUB/resources/images/icons3/bookmarkSingle-icon.svg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/230_bookmarks/index.xhtml#epubcfi(/4/2/10/4)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/icons3/annotation-icon.svg">
                      <img src = "data/EPUB/resources/images/icons3/annotation-icon.svg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/240_annotations/index.xhtml#epubcfi(/4/2/8/2)</td>

                    <td>presentation</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/resources/images/local_en/th3_anotation_pop_up.png">
                      <img src = "data/EPUB/resources/images/local_en/th3_anotation_pop_up.png"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                  <td class="location">./pages/240_annotations/index.xhtml#epubcfi(/4/2/10)</td>

                    <td>presentation</td>
                </tr>
          </tbody>
        </table>
      <p class="pagenav">Go to: <a href="#images">Top of section</a> | <a href="#navlist">Page navigation</a></p>
    </div>

  </div> <!-- end div for tabs' contents -->


  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js"></script>

  <script type="text/javascript">

    // https://datatables.net/reference/option/language
    // https://datatables.net/examples/basic_init/language.html
    // https://datatables.net/manual/i18n
    const dataTableInit = {
        "language": {
            "decimal":        "",
            "emptyTable":     'No data available in table',
            "info":           'Showing: _START_ - _END_ / _TOTAL_',
            "infoEmpty":      'Showing: 0 - 0 / 0',
            "infoFiltered":   '(filtered from _MAX_ total entries)',
            "infoPostFix":    "",
            "thousands":      ",",
            "lengthMenu":     'Display _MENU_ records per page',
            "loadingRecords": 'Loading...',
            "processing":     'Processing...',
            "search":         'Search:',
            "zeroRecords":    'No matching records found',
            "paginate": {
                "first":      'First',
                "last":       'Last',
                "next":       'Next',
                "previous":   'Previous'
            },
            "aria": {
                "sortAscending":  ': activate to sort column ascending',
                "sortDescending": ': activate to sort column descending'
            }
        }
    };

  // keep a flat list of the violations in memory for table filtering
  var violations = [{"file":"EPUB/package.opf","fileTitle":"Thorium reader user's guide (English, 3.1)","engine":"Ace","kburl":"http://kb.daisy.org/publishing/docs/metadata/schema-org.html","kbtitle":"Schema.org Accessibility Metadata","rule":"metadata-accessibilitysummary","desc":"Publications must declare the &#39;schema:accessibilitySummary&#39; metadata","impact":"serious","location":"EPUB/package.opf","rulesetTags":["EPUB"],"applicableRulesetTag":"EPUB"}];

  // update the contents of the table to reflec the filtering
  function updateTableContents(violationSubset) {
    // anything else is 'other'
    var rulesetTagLabels = {
      'wcag2a': 'WCAG 2.0 A',
      'wcag2aa': 'WCAG 2.0 AA',
      'EPUB': 'EPUB',
      'best-practice': 'Best Practice',
      'other': 'Other'
    };

    $('#violations-table').dataTable().fnDestroy();
    $("#message").remove();
    if (violationSubset.length == 0) {
      $("<p id='message'>No matching violations found.</p>").insertBefore("#violations .pagenav");
      $("#violations-table").hide();
      return;
    }

    $("#violations-table").show();
    $("#filters").show();

    var tablebody = $("#violations-table > tbody");
    tablebody.empty();

    violationSubset.forEach(function(violation) {

      var tr = $("<tr></tr>");
      var tdImpact = $("<td><span class='" + violation["impact"] + "'>" + violation["impact"] + "</span></td>");
      var tdRuleset = $("<td><span class='ruleset'>" + rulesetTagLabels[violation["applicableRulesetTag"]] + "</span></td>");
      var tdLocation = $("<td><em>\"" + violation["fileTitle"] + "\"</em><br/><br/><code class='location'>" + violation["location"] + "</code></td>");
      if (violation.html) {
        var tdSnippet = $('<br/><br/><div class=\'snippet\'>Snippet: <code>'+ violation.html.trim() + "</code></div>");
        tdLocation.append(tdSnippet);
      }
      var tdRule = $("<td>" + violation["rule"] + "<br/><br/><span class='engine'>" + violation["engine"] + "</span></td>");

      var desc = violation["desc"];

      var detailsArr = desc.split("\n");
      var tdDetails = $("<td class='details'></td>");

      var ul = $("<ul></ul>");
      tdDetails.append(ul);
      detailsArr.forEach(function(item) {
        if (item != "") {
          var elm = $("<li></li>");
          elm.text(decodeEntities(item));
          ul.append(elm);
        }
      });
      var link = $("<p><a href='"
        + violation["kburl"]
        + '\' target=\'_blank\'>Learn more about: ' + violation["kbtitle"] + "</a></p>");
      tdDetails.append(link);

      tr.append(tdImpact);
      tr.append(tdRuleset);
      tr.append(tdRule);
      tr.append(tdLocation);
      tr.append(tdDetails);
      tablebody.append(tr);
    });

    $('#violations-table').DataTable(dataTableInit);
  }

  function filterSelected() {
    var filters = [];
    $("#filters select").each(function(idx, elm) {
      $(elm).children("option").each(function (idx, optElm) {
        if (optElm.selected) {
          filters[elm.name] = optElm.value;
        }
      });
    });
    var filteredData = filterViolations(filters);
    updateTableContents(filteredData, true);
  }

  // expects:
  // {"rule": "all", "impact": "serious", "file": "p1.xhtml"}
  function filterViolations(filters) {
    var filteredList = [];
    violations.forEach(function(item) {
      if (
        (filters["rule"] == "all" || item["rule"] === filters["rule"])
        &&
        (filters["impact"] == "all" || item["impact"] === filters["impact"])
        &&
        (filters["file"] == "all" || item["file"] === filters["file"])
        &&
        (filters["ruleset"] == "all" || item["applicableRulesetTag"] === filters["ruleset"])
      )
      {
        filteredList.push(item);
      }
    });
    return filteredList;
  }

  function resetFilters() {
    $("#filters select").each(function(idx, elm) {
      $(elm).children("option").each(function (idx, optElm) {
        optElm.selected = optElm.value == "all";
      });
    });
    filterSelected();
  }

  function decodeEntities(text) {
    // The entities tend to appear in violation descriptions, and there are just a few named ones involved
    var namedEntities = {
      "&lt;": "<",
      "&gt;": ">",
      "&quot;": "\"",
      "&nbsp": " "
    };
    // process entities
    var str = text.replace(/&#(\d+);/g, function(match, dec) {
      return String.fromCharCode(dec);
		});

    //process named entities
    Object.keys(namedEntities).forEach(k => {
      str = str.replace(new RegExp(k, 'g'), namedEntities[k]);
    });
    return str;
  }

  // certain classes need to be added to elements if we're using javascript in the browser
  function prepareForJS() {
    $('#filters').removeClass('d-none');
    $('#navlist').addClass('nav-tabs nav');
    $('#violations').addClass('tab-pane active');
    $('#metadata').addClass('tab-pane');
    $('#outlines').addClass('tab-pane');
    $('#images').addClass('tab-pane');
  }
  $(document).ready(function() {
    prepareForJS();
    $('#metadata-table').DataTable(dataTableInit);
    //updateTableContents(violations, false);
    $('#violations-table').DataTable(dataTableInit);
    $('#filters > select').change(filterSelected);
  });

  </script>


</body>
</html>
